%!TEX program = lualatex
\documentclass[11pt,class=book]{standalone}
\input{packages}
\input{common}

\begin{document}
	\begin{tikzpicture}[
		x=1pt,
		y=1pt,
		%/utils/exec={\sffamily},
		font=\fontsize{9pt}{9.5pt}\selectfont,
		%>={Triangle[length=4,width=3]},
		%decoration={snake,segment length=5,amplitude=0.7},
	]
		\begin{axis}[
			ybar stacked,
			width=15cm,
			height=6cm,
			%xmin=0, xmax=22,
			ymin=0, ymax=48,
			enlarge x limits=0.025,
			bar width=0.8,
			%axis lines=none,
			%xtick=\empty,
			%ytick=\empty,
			ymajorgrids=true,
			%yminorgrids=true,
			xtick distance=1,
			xtick=data,
			%tick label style={font=\tiny},
			xtick pos=left,
			xlabel={Semaine},
			ylabel={Commits},
			nodes near coords,
			%symbolic x coords={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23},
			y tick label style={
				/pgf/number format/.cd,
				scaled y ticks = false,
				set thousands separator={.},
				fixed
			},
			legend style={
				at={(0.5,-0.25)},
				anchor=north,
				legend columns=-1,
				/tikz/every even column/.append style={
					column sep=10
				}
			},
		]
		\addplot+[
			white,
			fill=Cblue,
		] coordinates {
			(1, 14) % 02/09/2019 - 08/09/2019
			(2, 11) % 09/09/2019 - 15/09/2019
			(3, 8) % 16/09/2019 - 22/09/2019
			(4, 19) % 23/09/2019 - 29/09/2019
			(5, 13) % 30/09/2019 - 06/10/2019
			(6, 24) % 07/10/2019 - 13/10/2019
			(7, 22) % 14/10/2019 - 20/10/2019
			(8, 11) % 21/10/2019 - 27/10/2019
			(9, 1) % 28/10/2019 - 03/11/2019
			(10, 37) % 04/11/2019 - 10/11/2019
			(11, 7) % 11/11/2019 - 17/11/2019
			(12, 16) % 18/11/2019 - 24/11/2019
			(13, 11) % 25/11/2019 - 01/12/2019
			(14, 19) % 02/12/2019 - 08/12/2019
			(15, 20) % 09/12/2019 - 15/12/2019
			(16, 4) % 16/12/2019 - 22/12/2019
			(17, 0) % 23/12/2019 - 29/12/2019
			(18, 0) % 30/12/2019 - 05/01/2020
			(19, 14) % 06/01/2020 - 12/01/2020
			(20, 5) % 13/01/2020 - 19/01/2020
			(21, 0) % 20/01/2020 - 26/01/2020
			(22, 3) % 29/01/2020 - 02/02/2020
			(23, 9) % 03/02/2020 - 09/02/2020
			%(24, 0) % 10/02/2020 - 16/02/2020
		};
		\addplot[
			white,
			fill=Corange,
		] coordinates {
			(1, 0) % 02/09/2019 - 08/09/2019
			(2, 0) % 09/09/2019 - 15/09/2019
			(3, 0) % 16/09/2019 - 22/09/2019
			(4, 0) % 23/09/2019 - 29/09/2019
			(5, 0) % 30/09/2019 - 06/10/2019
			(6, 0) % 07/10/2019 - 13/10/2019
			(7, 0) % 14/10/2019 - 20/10/2019
			(8, 1) % 21/10/2019 - 27/10/2019
			(9, 0) % 28/10/2019 - 03/11/2019
			(10, 3) % 04/11/2019 - 10/11/2019
			(11, 0) % 11/11/2019 - 17/11/2019
			(12, 0) % 18/11/2019 - 24/11/2019
			(13, 0) % 25/11/2019 - 01/12/2019
			(14, 0) % 02/12/2019 - 08/12/2019
			(15, 0) % 09/12/2019 - 15/12/2019
			(16, 0) % 16/12/2019 - 22/12/2019
			(17, 0) % 23/12/2019 - 29/12/2019
			(18, 0) % 30/12/2019 - 05/01/2020
			(19, 1) % 06/01/2020 - 12/01/2020
			(20, 0) % 13/01/2020 - 19/01/2020
			(21, 0) % 20/01/2020 - 26/01/2020
			(22, 0) % 29/01/2020 - 02/02/2020
			(23, 0) % 03/02/2020 - 09/02/2020
			%(24, 0) % 10/02/2020 - 16/02/2020
		};
		\addplot[
			white,
			fill=Cgreen,
		] coordinates {
			(1, 0) % 02/09/2019 - 08/09/2019
			(2, 0) % 09/09/2019 - 15/09/2019
			(3, 0) % 16/09/2019 - 22/09/2019
			(4, 0) % 23/09/2019 - 29/09/2019
			(5, 0) % 30/09/2019 - 06/10/2019
			(6, 0) % 07/10/2019 - 13/10/2019
			(7, 0) % 14/10/2019 - 20/10/2019
			(8, 0) % 21/10/2019 - 27/10/2019
			(9, 1) % 28/10/2019 - 03/11/2019
			(10, 7) % 04/11/2019 - 10/11/2019
			(11, 0) % 11/11/2019 - 17/11/2019
			(12, 0) % 18/11/2019 - 24/11/2019
			(13, 11) % 25/11/2019 - 01/12/2019
			(14, 0) % 02/12/2019 - 08/12/2019
			(15, 7) % 09/12/2019 - 15/12/2019
			(16, 0) % 16/12/2019 - 22/12/2019
			(17, 0) % 23/12/2019 - 29/12/2019
			(18, 0) % 30/12/2019 - 05/01/2020
			(19, 1) % 06/01/2020 - 12/01/2020
			(20, 0) % 13/01/2020 - 19/01/2020
			(21, 0) % 20/01/2020 - 26/01/2020
			(22, 2) % 29/01/2020 - 02/02/2020
			(23, 9) % 03/02/2020 - 09/02/2020
			%(24, 0) % 10/02/2020 - 16/02/2020
		};
		\addplot[
			white,
			fill=Cred,
		] coordinates {
			(1, 0) % 02/09/2019 - 08/09/2019
			(2, 0) % 09/09/2019 - 15/09/2019
			(3, 0) % 16/09/2019 - 22/09/2019
			(4, 0) % 23/09/2019 - 29/09/2019
			(5, 0) % 30/09/2019 - 06/10/2019
			(6, 0) % 07/10/2019 - 13/10/2019
			(7, 0) % 14/10/2019 - 20/10/2019
			(8, 0) % 21/10/2019 - 27/10/2019
			(9, 0) % 28/10/2019 - 03/11/2019
			(10, 0) % 04/11/2019 - 10/11/2019
			(11, 0) % 11/11/2019 - 17/11/2019
			(12, 0) % 18/11/2019 - 24/11/2019
			(13, 0) % 25/11/2019 - 01/12/2019
			(14, 0) % 02/12/2019 - 08/12/2019
			(15, 0) % 09/12/2019 - 15/12/2019
			(16, 0) % 16/12/2019 - 22/12/2019
			(17, 0) % 23/12/2019 - 29/12/2019
			(18, 0) % 30/12/2019 - 05/01/2020
			(19, 2) % 06/01/2020 - 12/01/2020
			(20, 14) % 13/01/2020 - 19/01/2020
			(21, 16) % 20/01/2020 - 26/01/2020
			(22, 11) % 29/01/2020 - 02/02/2020
			(23, 13) % 03/02/2020 - 09/02/2020
			%(24, 16) % 10/02/2020 - 16/02/2020
		};

		\legend{\strut USCP, \strut USCP\_instances, \strut USCP\_results, \strut UTBM\_ST50\_Rapport\_de\_stage\_IRIMAS}
		\end{axis}
	\end{tikzpicture}
\end{document}
